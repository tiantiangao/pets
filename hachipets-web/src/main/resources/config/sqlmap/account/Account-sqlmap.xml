<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Account">

    <typeAlias alias="account" type="com.gtt.pets.entity.account.AccountEntity" />

    <insert id="addAccount" parameterClass="map">
        INSERT INTO Account_Account (Nickname, UserIP, AddTime, UpdateTime)
        VALUES (#nickname#, #userIP#, NOW(), NOW())
        <selectKey resultClass="java.lang.Integer" keyProperty="id" >
            SELECT @@IDENTITY AS id
        </selectKey>
    </insert>

    <select id="loadById" parameterClass="map" resultClass="account" >
        <![CDATA[
            SELECT AccountID, Nickname, AddTime, UpdateTime
            FROM Account_Account
            WHERE AccountID=#accountId#
        ]]>
    </select>

    <select id="loadByNickname" parameterClass="map" resultClass="account" >
        <![CDATA[
            SELECT AccountID, Nickname, AddTime, UpdateTime
            FROM Account_Account
            WHERE Nickname=#nickname#
        ]]>
    </select>

</sqlMap>